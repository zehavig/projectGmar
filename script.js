// function prod(){
// //××•×‘×™×™×§×˜ ×ž×•×¦×¨×™×
//     let Products=[
//         {name:"××•×¤× ×™ ×”×¨×™× Polygon Cascade 3",price:1690,Brand:"Polygon",img:"./img/××•×¤× ×™ ×”×¨×™× Polygon Cascade 3.webp", id:1 ,expansion:"./Detail/××•×¤× ×™ ×”×¨×™× Polygon Cascade 3.png" },
//         {name:"××•×¤× ×™ ×”×¨×™× POLYGON XTRADA 6",price:3800,Brand:"Polygon",img:"./img/××•×¤× ×™ ×”×¨×™× POLYGON XTRADA 6.webp", id:2 ,expansion:"./Detail/××•×¤× ×™ ×”×¨×™× POLYGON XTRADA 6.jpg"},
//         {name:"××•×¤× ×™ ×”×¨×™× Polygon Xtrada 7",price:4990,Brand:"Polygon",img:"./img/××•×¤× ×™ ×”×¨×™× Polygon Xtrada 7.webp", id: 3 ,expansion:"./Detail/××•×¤× ×™ ×”×¨×™× Polygon Xtrada 7.jpg"},
//         {name:"××•×¤× ×™ ××™×–×•×Ÿ JDBUG TC04",price:419,Brand:"JD BUG",img:"./img/××•×¤× ×™ ××™×–×•×Ÿ JDBUG TC04.webp", id: 4 ,expansion:"./Detail/××•×¤× ×™ ××™×–×•×Ÿ JDBUG TC04.jpg"},
//         {name:"××•×¤× ×™ ×”×¨×™× ×œ×™×œ×“×™× Marin Hidden Canyon",price:1690,Brand:"Marin",img:"./img/××•×¤× ×™ ×”×¨×™× ×œ×™×œ×“×™× Marin Hidden Canyon.webp", id:5 ,expansion:"./Detail/××•×¤× ×™ ×”×¨×™× ×œ×™×œ×“×™× Marin Hidden Canyon.jpg"},
//         {name:"××•×¤× ×™ ×™×œ×“×™× Poligon Relic 20",price:1400,Brand:"Polygon",img:"./img/××•×¤× ×™ ×™×œ×“×™× Poligon Relic 20.webp", id: 6 ,expansion:"./Detail/××•×¤× ×™ ×™×œ×“×™× Poligon Relic 20.jpg"},
//         {name:"××•×¤× ×™ ×™×œ×“×™× POLYGON SISKIU D24",price:5490,Brand:"Polygon",img:"./img/××•×¤× ×™ ×™×œ×“×™× POLYGON SISKIU D24.webp", id:7 ,expansion:"./Detail/××•×¤× ×™ ×™×œ×“×™× POLYGON SISKIU D24.jpg"},
//         {name:"××•×¤× ×™ ×™×œ×“×™× ××œ×•×ž×™× ×™×•× BMX ROCKET 14",price:750,Brand:"ROCKET",img:"./img/××•×¤× ×™ ×™×œ×“×™× ××œ×•×ž×™× ×™×•× BMX ROCKET 14.webp", id:8 ,expansion:"./Detail/××•×¤× ×™ ×™×œ×“×™× ××œ×•×ž×™× ×™×•× BMX ROCKET 14.jpg"},
//         {name:"×¡×§×™×™×˜×‘×•×¨×“ ENUFF DREAMCATCHER",price:450,Brand:"ENUFF",img:"./img/×¡×§×™×™×˜×‘×•×¨×“ ENUFF DREAMCATCHER.webp", id:9 ,expansion:"./Detail/×¡×§×™×™×˜×‘×•×¨×“ ENUFF DREAMCATCHER.jpg"},
//         {name:"×¡×§×™×™×˜×‘×•×¨×“ ENUFF FADE",price:399,Brand:"ENUFF",img:"./img/×¡×§×™×™×˜×‘×•×¨×“ ENUFF FADE.webp", id:10 ,expansion:"./Detail/×¡×§×™×™×˜×‘×•×¨×“ ENUFF FADE.jpg"},
//         {name:"×¡×§×™×™×˜×‘×•×¨×“ ENUFF SKULLY",price:349,Brand:"ENUFF",img:"./img/×¡×§×™×™×˜×‘×•×¨×“ ENUFF SKULLY.webp", id:11 ,expansion:"./Detail/×¡×§×™×™×˜×‘×•×¨×“ ENUFF SKULLY.jpg"},
//         {name:"×§×•×¨×§×™× ×˜ 3 ×’×œ×’×œ×™× MS201",price:255,Brand:"JD BUG",img:"./img/×§×•×¨×§×™× ×˜ 3 ×’×œ×’×œ×™× MS201.webp", id:12 ,expansion:"./Detail/×§×•×¨×§×™× ×˜ 3 ×’×œ×’×œ×™× MS201.png"},
//         {name:"×§×•×¨×§×™× ×˜ ×¤×¢×œ×•×œ×™× ASSAULT NEOCHROME",price:1490,Brand:"SLAMM",img:"./img/×§×•×¨×§×™× ×˜ ×¤×¢×œ×•×œ×™× ASSAULT NEOCHROME.webp", id:13 ,expansion:"./Detail/×§×•×¨×§×™× ×˜ ×¤×¢×œ×•×œ×™× ASSAULT NEOCHROME.jpg"},
//         {name:"×§×•×¨×§×™× ×˜ ×¤×¢×œ×•×œ×™× MS105 ×©×—×•×¨.",price:450,Brand:"JD BUG",img:"./img/×§×•×¨×§×™× ×˜ ×¤×¢×œ×•×œ×™× MS105 ×©×—×•×¨.webp", id:14 ,expansion:"./Detail/×§×•×¨×§×™× ×˜ ×¤×¢×œ×•×œ×™× MS105 ×©×—×•×¨..jpg"},
//         {name:"×§×•×¨×§×™× ×˜ ×¤×¢×œ×•×œ×™× SLAMM STROBE",price:1490,Brand:"SLAMM",img:"./img/×§×•×¨×§×™× ×˜ ×¤×¢×œ×•×œ×™× SLAMM STROBE.webp", id:15 ,expansion:"./Detail/×§×•×¨×§×™× ×˜ ×¤×¢×œ×•×œ×™× SLAMM STROBE.jpg"},
//         {name:"×§×¡×“×” ×œ××•×¤× ×™×™× ABUS ADURO 2.0",price:279,Brand:"ABUS",img:"./img/×§×¡×“×” ×œ××•×¤× ×™×™× ABUS ADURO 2.0.webp", id:16 ,expansion:"./Detail/×§×¡×“×” ×œ××•×¤× ×™×™× ABUS ADURO 2.0.jpg"},
//         {name:"×§×¡×“×” ×œ××•×¤× ×™×™× ABUS POWERDOME MIPS",price:799,Brand:"ABUS",img:"./img/×§×¡×“×” ×œ××•×¤× ×™×™× ABUS POWERDOME MIPS.webp", id:17 ,expansion:"./Detail/×§×¡×“×” ×œ××•×¤× ×™×™× ABUS POWERDOME MIPS.jpg"},
//         {name:"×§×¡×“×” ×œ××•×¤× ×™×™× UVEX FINALE 2.0",price:699,Brand:"Uvex",img:"./img/×§×¡×“×” ×œ××•×¤× ×™×™× UVEX FINALE 2.0.webp", id:18 ,expansion:"./Detail/×§×¡×“×” ×œ××•×¤× ×™×™× UVEX FINALE 2.0.jpg"},
//         {name:"×§×¡×“×” ×œ××•×¤× ×™×™× ×œ×™×œ×“×™× ABUS SMILEY 3",price:219,Brand:"ABUS",img:"./img/×§×¡×“×” ×œ××•×¤× ×™×™× ×œ×™×œ×“×™× ABUS SMILEY 3.webp", id:19 ,expansion:"./Detail/×§×¡×“×” ×œ××•×¤× ×™×™× ×œ×™×œ×“×™× ABUS SMILEY 3.jpg"},
//         {name:"×§×¡×“×” ×œ××•×¤× ×™×™× UVEX REVOLT",price:999,Brand:"UVEX",img:"./img/×§×¡×“×” ×œ××•×¤× ×™×™× UVEX REVOLT.webp", id:20 ,expansion:"./Detail/×§×¡×“×” ×œ××•×¤× ×™×™× UVEX REVOLT.jpg"}
//     ]

//     let prodj=JSON.stringify(Products)
//     localStorage.setItem("Products", prodj)
// }

// -------------------- ×”×¦×’×ª ×›×œ ×”×ž×•×¦×¨×™× ×‘×“×£ ×”×¨××©×™ --------------------

/**
 * ×”×¦×’×ª ×›×œ ×”×ž×•×¦×¨×™× ×‘×“×£ ×”×¨××©×™
 */
// ...existing code...

function Product_display() {
    let productj = JSON.parse(localStorage.getItem("Products"));
    let sec = document.querySelector('section');

    productj.forEach(product => {
        let NewProduct = document.createElement('div');
        let name = document.createElement('p');
        let price = document.createElement('p');
        let image = document.createElement('img');
        let AddCart = document.createElement('button');
        let moreDetails = document.createElement('button');

        image.src = product.img;
        name.innerText = product.name;
        price.innerText = product.price + "â‚ª";
        AddCart.innerText = "×”×•×¡×£ ×œ×¡×œ";
        moreDetails.innerText = "×œ×¤×¨×˜×™× × ×•×¡×¤×™×";

        NewProduct.append(image, name, price, AddCart, moreDetails);
        sec.appendChild(NewProduct);

        moreDetails.addEventListener('click', () => {
            sessionStorage.setItem("Id", product.id);
            window.location = './index2.html';
        });

        AddCart.addEventListener('click', () => {
            addcart(product.id);
            showToast('×”×ž×•×¦×¨ × ×•×¡×£ ×œ×¡×œ ×‘×”×¦×œ×—×”!');
        });
    });
}

function moreDetail() {
    let productj = JSON.parse(localStorage.getItem("Products"));
    let id = sessionStorage.getItem("Id");
    let article = document.getElementById('art');
    let selectedProduct = productj.find(product => product.id == id);

    let aside = document.createElement('aside');
    let name = document.createElement('p');
    let price = document.createElement('p');
    let image = document.createElement('img');
    let expansion = document.createElement('img');
    let AddCart = document.createElement('button');
    let goToCartBtn = document.createElement('button');

    name.innerText = selectedProduct.name;
    price.innerText = selectedProduct.price + 'â‚ª';
    image.src = selectedProduct.img;
    expansion.src = selectedProduct.expansion;
    AddCart.innerText = "×”×•×¡×£ ×œ×¡×œ";
    goToCartBtn.innerText = "×œ×ž×¢×‘×¨ ×œ×¢×’×œ×”";

    AddCart.addEventListener('click', () => {
        addcart(selectedProduct.id);
        showToast('×”×ž×•×¦×¨ × ×•×¡×£ ×œ×¡×œ ×‘×”×¦×œ×—×”!');
    });

    goToCartBtn.addEventListener('click', () => {
        window.location = './index3.html';
    });

    aside.append(name, image, expansion, price, AddCart, goToCartBtn);
    article.appendChild(aside);
}

function addcart(id) {
    let cart = JSON.parse(sessionStorage.getItem("cart")) || [];
    cart.push(id);
    sessionStorage.setItem("cart", JSON.stringify(cart));
}

function myCart() {
    let cart = JSON.parse(sessionStorage.getItem("cart")) || [];
    let products = JSON.parse(localStorage.getItem("Products")) || [];
    let cartSection = document.getElementById('cartDisplay');
    cartSection.innerHTML = '';

    let quantities = {};
    cart.forEach(id => {
        quantities[id] = (quantities[id] || 0) + 1;
    });

    let totalPrice = 0;

    Object.keys(quantities).forEach(itemId => {
        let selectedProduct = products.find(product => product.id == itemId);
        if (selectedProduct) {
            let productDiv = document.createElement('div');
            productDiv.className = "cart-row";

            let image = document.createElement('img');
            image.src = selectedProduct.img;

            let name = document.createElement('p');
            name.innerText = selectedProduct.name;

            let price = document.createElement('p');
            price.innerText = selectedProduct.price + "â‚ª";

            let quantityDiv = document.createElement('div');
            quantityDiv.style.display = "flex";
            quantityDiv.style.alignItems = "center";
            quantityDiv.style.gap = "5px";

            let minusBtn = document.createElement('button');
            minusBtn.innerText = "-";
            minusBtn.addEventListener('click', () => updateQuantity(itemId, -1));

            let qtySpan = document.createElement('span');
            qtySpan.innerText = quantities[itemId];
            qtySpan.className = "qty-span";

            let plusBtn = document.createElement('button');
            plusBtn.innerText = "+";
            plusBtn.addEventListener('click', () => updateQuantity(itemId, 1));

            let deleteBtn = document.createElement('button');
            deleteBtn.innerText = "ðŸ—‘ï¸";
            deleteBtn.title = "×ž×—×§ ×ž×•×¦×¨ ×ž×”×¡×œ";
            deleteBtn.className = "delete-btn";
            deleteBtn.addEventListener('click', () => removeProduct(itemId));

            quantityDiv.append(minusBtn, qtySpan, plusBtn, deleteBtn);

            productDiv.append(image, name, price, quantityDiv);
            cartSection.appendChild(productDiv);

            totalPrice += selectedProduct.price * quantities[itemId];
        }
    });

    let totalElement = document.createElement('p');
    totalElement.innerText = "×¡×”''×› ×œ×ª×©×œ×•×: " + totalPrice + "â‚ª";
    cartSection.appendChild(totalElement);

    let payBtn = document.createElement('button');
    payBtn.innerText = "×œ×ª×©×œ×•× ×¢×›×©×™×•";
    payBtn.className = "pay-btn";
    payBtn.addEventListener('click', function() {
        alert("×ª×•×“×” ×¢×œ ×”×¨×›×™×©×”!");
        sessionStorage.removeItem("cart");
        myCart();
    });
    cartSection.appendChild(payBtn);

    function updateQuantity(itemId, change) {
        let cart = JSON.parse(sessionStorage.getItem("cart")) || [];
        if (change === 1) {
            cart.push(Number(itemId));
        } else if (change === -1) {
            let idx = cart.indexOf(Number(itemId));
            if (idx !== -1) cart.splice(idx, 1);
        }
        sessionStorage.setItem("cart", JSON.stringify(cart));
        myCart();
    }

    function removeProduct(itemId) {
        let cart = JSON.parse(sessionStorage.getItem("cart")) || [];
        cart = cart.filter(id => id != itemId);
        sessionStorage.setItem("cart", JSON.stringify(cart));
        myCart();
    }
}

document.addEventListener("DOMContentLoaded", function () {
    let header = document.createElement("header");

    let logo = document.createElement("img");
    logo.src = "./img/logo.png";
    logo.alt = "×œ×•×’×• ×”×—× ×•×ª";
    logo.onclick = function () {
        location.href = 'homePage.html';
    };

    let nav = document.createElement("nav");

    let cartBtn = document.createElement("button");
    cartBtn.textContent = "×ž×¢×‘×¨ ×œ×¢×’×œ×”";
    cartBtn.onclick = function () {
        location.href = "index3.html";
    };
    nav.appendChild(cartBtn);

header.appendChild(nav);
header.appendChild(logo);



    document.body.prepend(header);

    let footer = document.createElement("footer");

    let phoneP = document.createElement("p");
    phoneP.textContent = "ðŸ“ž ×˜×œ×¤×•×Ÿ: 03-1234567";

    let mailP = document.createElement("p");
    mailP.textContent = "ðŸ“§ ×ž×™×™×œ: store@example.com";

    footer.append(phoneP, mailP);

    document.body.appendChild(footer);
});

function showToast(message) {
    let oldToast = document.getElementById('toast-message');
    if (oldToast) oldToast.remove();

    let toast = document.createElement('div');
    toast.id = 'toast-message';
    toast.innerText = message;
    document.body.appendChild(toast);

    setTimeout(() => { toast.classList.add('show'); }, 10);
    setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 400);
    }, 1800);
}